<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PDF Viewer</title>
    <style>
      html, body {
        margin: 0;
        height: 100%;
        background: #000; /* default dark background — app theme থেকে override করা যায় */
        color: #fff;
      }
      #pdf-viewer {
        width: 100%;
        height: 100vh;
        border: 0;
      }
      .msg {
        display:flex;
        align-items:center;
        justify-content:center;
        height:100vh;
        padding:16px;
        text-align:center;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <iframe id="pdf-viewer" src="" frameborder="0" allowfullscreen sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
      <noscript>
        <div class="msg">This viewer needs JavaScript enabled.</div>
      </noscript>
    </div>

    <script>
      (function(){
        const params = new URLSearchParams(window.location.search);
        const pdfUrl = params.get("file");
        const theme = params.get("theme"); // optional: pass ?theme=dark or ?theme=light

        // optional: change background if theme=light
        if (theme === "light") {
          document.body.style.background = "#fff";
          document.body.style.color = "#000";
        }

        if (!pdfUrl) {
          document.getElementById("container").innerHTML =
            '<div class="msg">No file specified. Use ?file=&lt;PDF_URL&gt; in the URL.</div>';
          return;
        }

        // If you host pdf.js (viewer.html) inside same repo, use relative path:
        // const viewer = "./pdfjs/web/viewer.html?file=" + encodeURIComponent(pdfUrl);

        // Using official hosted pdf.js viewer (mozilla's demo) — ok for testing:
        const viewer = "https://mozilla.github.io/pdf.js/web/viewer.html?file=" + encodeURIComponent(pdfUrl);

        // set iframe src
        const iframe = document.getElementById("pdf-viewer");
        iframe.src = viewer;

        // optional: listen to iframe load for debugging
        iframe.onload = () => {
          console.log("Viewer loaded:", viewer);
        };
        iframe.onerror = (e) => {
          console.error("Iframe error", e);
        };
      })();
    </script>
  </body>
</html>